<% provide :title, "All Announcement" %>
<% provide :announcements_is_active, "active" %>

<div class="row">
  <div class="col s12">
    <div class="card">
      <div class="card-content">
        <span class="card-title activator">お知らせ<i class="material-icons right">settings</i></span>
      </div>

      <div class="card-stacked">
        <div class="card-content">
          <ul class="collection">
            <% unless @announcements.empty? %>
              <ul class="collection">
                <% @announcements.each do |anc| %>
                  <% if anc.timing %>
                    <% timing = '家を出るとき' %>
                  <% else %>
                    <% timing = '家に帰ったとき' %>
                  <% end %>

                  <% icon_set = Announcement.mode_icons_and_colors[anc.mode] %>

                  <li class="collection-item avatar">
                    <i class="material-icons circle <%= icon_set[1] %>"><%= icon_set[0] %></i>
                    <span class="title"><%= Announcement.jp_translated_modes[anc.mode] %></span>
                    <p>
                      <%= anc.date.to_s(:date_short) %> : <%= timing %>
                    </p>
                    <%= link_to edit_announcement_path(anc), remote: true, class: 'btn-floating secondary-content' do %>
                      <i class="material-icons">edit</i>
                    <% end %>
                  </li>
                <% end %>
              </ul>
            <% end %>
          </ul>
        </div>

        <div class="card-action">
          <%= link_to new_announcement_path, remote: true, class: 'btn waves-effect waves-light' do %>
            NEW
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
